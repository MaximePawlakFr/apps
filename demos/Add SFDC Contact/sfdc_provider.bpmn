<?xml version="1.0" encoding="UTF-8"?>
<definitions
    xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:activiti="http://activiti.org/bpmn"
    xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
    xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC"
    xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://www.activiti.org/test">
    <process id="io.point.sfdc_provider" name="io.point.sfdc_provider" isExecutable="true">
        <startEvent id="startevent1" name="Start"></startEvent>
        <serviceTask id="task1" name="List Objects" activiti:class="plugins.fact_components.api_SFDC_List_Objs"></serviceTask>
        <serviceTask id="task2" name="List Records" activiti:class="plugins.fact_components.api_SFDC_List_Recs">
            <extensionElements>
                <activiti:field name="objType">
                    <activiti:expression>${objTypeId}</activiti:expression>
                </activiti:field>
            </extensionElements>
        </serviceTask>
        <serviceTask id="task3" name="Read Record" activiti:class="plugins.fact_components.api_SFDC_Read_Obj_toFields">
            <extensionElements>
                <activiti:field name="objType">
                    <activiti:expression>${objTypeId}</activiti:expression>
                </activiti:field>
                <activiti:field name="objKey">
                    <activiti:expression>${objId}</activiti:expression>
                </activiti:field>
            </extensionElements>
        </serviceTask>
        <serviceTask id="task4" name="Update Record" activiti:class="plugins.fact_components.api_SFDC_Update_Obj_fromFields">
            <extensionElements>
                <activiti:field name="objType">
                    <activiti:expression>${objTypeId}</activiti:expression>
                </activiti:field>
                <activiti:field name="objKey">
                    <activiti:expression>${objId}</activiti:expression>
                </activiti:field>
            </extensionElements>
        </serviceTask>
        <sequenceFlow id="flow1" sourceRef="startevent1" targetRef="exclusivegateway1"></sequenceFlow>
        <sequenceFlow id="flow10" sourceRef="task4" targetRef="task5"></sequenceFlow>
        <endEvent id="endevent1" name="End"></endEvent>
        <serviceTask id="task5" name="Read Record Again" activiti:class="plugins.fact_components.api_SFDC_Read_Obj_toFields">
            <extensionElements>
                <activiti:field name="objType">
                    <activiti:expression>${objTypeId}</activiti:expression>
                </activiti:field>
                <activiti:field name="objKey">
                    <activiti:expression>${objId}</activiti:expression>
                </activiti:field>
            </extensionElements>
        </serviceTask>
        <exclusiveGateway id="exclusivegateway1" name="Exclusive Gateway" default="default"></exclusiveGateway>
        <sequenceFlow id="flow12" name="GETOBJS" sourceRef="exclusivegateway1" targetRef="task1">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${apidata_method == "GETOBJS"}]]>
            </conditionExpression>
        </sequenceFlow>
        <sequenceFlow id="flow13" name="GETRECS" sourceRef="exclusivegateway1" targetRef="task2">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${apidata_method == "GETRECS"}]]>
            </conditionExpression>
        </sequenceFlow>
        <sequenceFlow id="flow14" name="GET" sourceRef="exclusivegateway1" targetRef="task3">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${apidata_method == "GET"}]]>
            </conditionExpression>
        </sequenceFlow>
        <sequenceFlow id="flow15" name="PUT" sourceRef="exclusivegateway1" targetRef="task4">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${apidata_method == "PUT" || apidata_method == "PATCH"}]]>
            </conditionExpression>
        </sequenceFlow>
        <sequenceFlow id="flow16" sourceRef="task5" targetRef="endevent1"></sequenceFlow>
        <sequenceFlow id="flow17" sourceRef="task3" targetRef="endevent1"></sequenceFlow>
        <sequenceFlow id="flow18" sourceRef="task2" targetRef="endevent1"></sequenceFlow>
        <sequenceFlow id="flow19" sourceRef="task1" targetRef="endevent1"></sequenceFlow>
        <sequenceFlow id="default" name="Unsupported" sourceRef="exclusivegateway1" targetRef="endevent1"></sequenceFlow>
        <userTask id="usertask1" name="Default" activiti:formKey="poi_default_view"></userTask>
        <userTask id="usertask2" name="Opportunity" activiti:formKey="poi_opportunity_view"></userTask>
        <userTask id="usertask3" name="Contact" activiti:formKey="poi_contact_view"></userTask>
        <serviceTask id="POSTrec" name="Create Record" activiti:class="plugins.fact_components.api_SFDC_Create_Obj_fromFields">
            <extensionElements>
                <activiti:field name="objType">
                    <activiti:expression>${objTypeId}</activiti:expression>
                </activiti:field>
                <activiti:field name="fieldsJSON">
                    <activiti:expression>${objFields}</activiti:expression>
                </activiti:field>
            </extensionElements>
        </serviceTask>
        <sequenceFlow id="flow20" name="POST" sourceRef="exclusivegateway1" targetRef="POSTrec">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${apidata_method=="POST"}]]>
            </conditionExpression>
        </sequenceFlow>
        <sequenceFlow id="flow21" sourceRef="POSTrec" targetRef="endevent1"></sequenceFlow>
    </process>
    <bpmndi:BPMNDiagram id="BPMNDiagram_io.point.sfdc_provider">
        <bpmndi:BPMNPlane bpmnElement="io.point.sfdc_provider" id="BPMNPlane_io.point.sfdc_provider">
            <bpmndi:BPMNShape bpmnElement="startevent1" id="BPMNShape_startevent1">
                <omgdc:Bounds height="35.0" width="35.0" x="70.0" y="164.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="task1" id="BPMNShape_task1">
                <omgdc:Bounds height="55.0" width="105.0" x="330.0" y="209.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="task2" id="BPMNShape_task2">
                <omgdc:Bounds height="55.0" width="105.0" x="330.0" y="280.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="task3" id="BPMNShape_task3">
                <omgdc:Bounds height="55.0" width="105.0" x="334.0" y="30.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="task4" id="BPMNShape_task4">
                <omgdc:Bounds height="55.0" width="105.0" x="334.0" y="100.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="endevent1" id="BPMNShape_endevent1">
                <omgdc:Bounds height="35.0" width="35.0" x="740.0" y="164.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="task5" id="BPMNShape_task5">
                <omgdc:Bounds height="55.0" width="105.0" x="480.0" y="100.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="exclusivegateway1" id="BPMNShape_exclusivegateway1">
                <omgdc:Bounds height="40.0" width="40.0" x="150.0" y="161.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="usertask1" id="BPMNShape_usertask1">
                <omgdc:Bounds height="55.0" width="105.0" x="210.0" y="500.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="usertask2" id="BPMNShape_usertask2">
                <omgdc:Bounds height="55.0" width="105.0" x="330.0" y="500.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="usertask3" id="BPMNShape_usertask3">
                <omgdc:Bounds height="55.0" width="105.0" x="460.0" y="500.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="POSTrec" id="BPMNShape_POSTrec">
                <omgdc:Bounds height="55.0" width="105.0" x="330.0" y="360.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNEdge bpmnElement="flow1" id="BPMNEdge_flow1">
                <omgdi:waypoint x="105.0" y="181.0"></omgdi:waypoint>
                <omgdi:waypoint x="150.0" y="181.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow10" id="BPMNEdge_flow10">
                <omgdi:waypoint x="439.0" y="127.0"></omgdi:waypoint>
                <omgdi:waypoint x="480.0" y="127.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow12" id="BPMNEdge_flow12">
                <omgdi:waypoint x="170.0" y="201.0"></omgdi:waypoint>
                <omgdi:waypoint x="169.0" y="236.0"></omgdi:waypoint>
                <omgdi:waypoint x="330.0" y="236.0"></omgdi:waypoint>
                <bpmndi:BPMNLabel>
                    <omgdc:Bounds height="12.0" width="52.0" x="180.0" y="219.0"></omgdc:Bounds>
                </bpmndi:BPMNLabel>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow13" id="BPMNEdge_flow13">
                <omgdi:waypoint x="170.0" y="201.0"></omgdi:waypoint>
                <omgdi:waypoint x="169.0" y="307.0"></omgdi:waypoint>
                <omgdi:waypoint x="330.0" y="307.0"></omgdi:waypoint>
                <bpmndi:BPMNLabel>
                    <omgdc:Bounds height="12.0" width="53.0" x="180.0" y="289.0"></omgdc:Bounds>
                </bpmndi:BPMNLabel>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow14" id="BPMNEdge_flow14">
                <omgdi:waypoint x="170.0" y="161.0"></omgdi:waypoint>
                <omgdi:waypoint x="170.0" y="57.0"></omgdi:waypoint>
                <omgdi:waypoint x="334.0" y="57.0"></omgdi:waypoint>
                <bpmndi:BPMNLabel>
                    <omgdc:Bounds height="12.0" width="23.0" x="179.0" y="41.0"></omgdc:Bounds>
                </bpmndi:BPMNLabel>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow15" id="BPMNEdge_flow15">
                <omgdi:waypoint x="170.0" y="161.0"></omgdi:waypoint>
                <omgdi:waypoint x="170.0" y="127.0"></omgdi:waypoint>
                <omgdi:waypoint x="334.0" y="127.0"></omgdi:waypoint>
                <bpmndi:BPMNLabel>
                    <omgdc:Bounds height="12.0" width="22.0" x="179.0" y="111.0"></omgdc:Bounds>
                </bpmndi:BPMNLabel>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow16" id="BPMNEdge_flow16">
                <omgdi:waypoint x="585.0" y="127.0"></omgdi:waypoint>
                <omgdi:waypoint x="757.0" y="127.0"></omgdi:waypoint>
                <omgdi:waypoint x="757.0" y="164.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow17" id="BPMNEdge_flow17">
                <omgdi:waypoint x="439.0" y="57.0"></omgdi:waypoint>
                <omgdi:waypoint x="757.0" y="57.0"></omgdi:waypoint>
                <omgdi:waypoint x="757.0" y="164.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow18" id="BPMNEdge_flow18">
                <omgdi:waypoint x="435.0" y="307.0"></omgdi:waypoint>
                <omgdi:waypoint x="757.0" y="307.0"></omgdi:waypoint>
                <omgdi:waypoint x="757.0" y="199.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow19" id="BPMNEdge_flow19">
                <omgdi:waypoint x="435.0" y="236.0"></omgdi:waypoint>
                <omgdi:waypoint x="757.0" y="236.0"></omgdi:waypoint>
                <omgdi:waypoint x="757.0" y="199.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="default" id="BPMNEdge_default">
                <omgdi:waypoint x="190.0" y="181.0"></omgdi:waypoint>
                <omgdi:waypoint x="740.0" y="181.0"></omgdi:waypoint>
                <bpmndi:BPMNLabel>
                    <omgdc:Bounds height="12.0" width="63.0" x="209.0" y="164.0"></omgdc:Bounds>
                </bpmndi:BPMNLabel>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow20" id="BPMNEdge_flow20">
                <omgdi:waypoint x="170.0" y="201.0"></omgdi:waypoint>
                <omgdi:waypoint x="170.0" y="387.0"></omgdi:waypoint>
                <omgdi:waypoint x="330.0" y="387.0"></omgdi:waypoint>
                <bpmndi:BPMNLabel>
                    <omgdc:Bounds height="12.0" width="100.0" x="179.0" y="369.0"></omgdc:Bounds>
                </bpmndi:BPMNLabel>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow21" id="BPMNEdge_flow21">
                <omgdi:waypoint x="435.0" y="387.0"></omgdi:waypoint>
                <omgdi:waypoint x="757.0" y="387.0"></omgdi:waypoint>
                <omgdi:waypoint x="757.0" y="199.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
        </bpmndi:BPMNPlane>
    </bpmndi:BPMNDiagram>
</definitions>